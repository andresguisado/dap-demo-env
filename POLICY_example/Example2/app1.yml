---
##############
# LAYERS/HOSTS
##############
- !policy
  id: app1
  annotations:
    description: Application 1
  body:

  # define app group and host(s)
  - !group nodes
  - !host node

  # grant app role to host(s)
  - !grant
    role: !group nodes
    members:
    - !host node
    - !group /masters

  # define app secrets
  - &variables
    - !variable secret1
    - !variable secret2

  # grant app role access to secrets
  - !permit
    privileges: [ read, execute ]
    roles:
    - !group nodes
    resources: *variables
